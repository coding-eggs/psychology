<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <title>11111</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/img/favicon.png">


    <link rel="stylesheet" href="assets/css/element.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">

    <!-- Main CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- vue -->
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/vue-uploader.js"></script>
    <script src="assets/js/axios.js"></script>
    <script src="assets/js/element.js"></script>
    <script src="assets/js/qs.js"></script>
    <script src="assets/util/localStorageUtil.js" ></script>
    <script src="assets/util/request.js" ></script>
    <script src="assets/util/jsencrypt.js"></script>


    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.min.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

</head>
<body>

<!-- Main Wrapper -->
<div class="main-wrapper" id="test">



    <el-button v-on:click="test">hhhhh</el-button>
    <uploader :options="options" class="uploader-example">
        <uploader-unsupport></uploader-unsupport>
        <uploader-drop>
            <p>Drop files here to upload or</p>
            <uploader-btn>select files</uploader-btn>
            <uploader-btn :attrs="attrs">select images</uploader-btn>
            <uploader-btn :directory="true">select folder</uploader-btn>
        </uploader-drop>
        <uploader-list></uploader-list>
    </uploader>


</div>
<!-- /Main Wrapper -->

<!-- jQuery -->
<script src="assets/js/jquery-3.5.1.min.js"></script>

<!-- Bootstrap Core JS -->
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<!-- Feather Icon JS -->
<script src="assets/js/feather.min.js"></script>

<!-- Slimscroll JS -->
<script src="assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom JS -->
<script src="assets/js/script.js"></script>

</body>


<script>
    let storage = new Storage();
    const login = new Vue({
        el: "#test",
        data(){
            return{
                idList: [],
                regionSuccess: false,
                testData:  [
                    {
                        "functionalRegionId": "13020101",
                        "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                        "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                        "functionalRegionName": "取水区域",
                        "functionalRegionCode": "01",
                        "functionalRegionLevelCode": "001",
                        "plantType": 1,
                        "functionalRegionUpId": "0",
                        "children": [
                            {
                                "functionalRegionId": "1",
                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                "functionalRegionName": "取水区域-1",
                                "functionalRegionCode": "01",
                                "functionalRegionLevelCode": "001",
                                "plantType": 1,
                                "functionalRegionUpId": "13020101",
                                "children": [
                                    {
                                        "functionalRegionId": "2",
                                        "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                        "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                        "functionalRegionName": "取水区域-2",
                                        "functionalRegionCode": "01",
                                        "functionalRegionLevelCode": "001001",
                                        "plantType": 1,
                                        "functionalRegionUpId": "1",
                                        "children": [
                                            {
                                                "functionalRegionId": "3",
                                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                                "functionalRegionName": "取水区域-3",
                                                "functionalRegionCode": "01",
                                                "functionalRegionLevelCode": "001001001",
                                                "plantType": 1,
                                                "functionalRegionUpId": "2",
                                                "children": null,
                                                "delFlg": 0,
                                                "memo": null,
                                                "createUserId": "1",
                                                "createTime": "2020-01-01 00:00:00",
                                                "updateUserId": "0",
                                                "updateTime": "2021-06-11 11:16:43"
                                            },
                                            {
                                                "functionalRegionId": "236805570350288896",
                                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                                "functionalRegionName": "取水区域-5",
                                                "functionalRegionCode": "03",
                                                "functionalRegionLevelCode": "001001003",
                                                "plantType": 1,
                                                "functionalRegionUpId": "2",
                                                "children": null,
                                                "delFlg": 0,
                                                "memo": null,
                                                "createUserId": "0",
                                                "createTime": "2021-06-15 11:00:47",
                                                "updateUserId": "0",
                                                "updateTime": "2021-06-15 11:00:47"
                                            }
                                        ],
                                        "delFlg": 0,
                                        "memo": null,
                                        "createUserId": "1",
                                        "createTime": "2020-01-01 00:00:00",
                                        "updateUserId": "1",
                                        "updateTime": "2020-01-01 00:00:00"
                                    }
                                ],
                                "delFlg": 0,
                                "memo": null,
                                "createUserId": "1",
                                "createTime": "2020-01-01 00:00:00",
                                "updateUserId": "1",
                                "updateTime": "2020-01-01 00:00:00"
                            }
                        ],
                        "delFlg": 0,
                        "memo": null,
                        "createUserId": "1",
                        "createTime": "2020-01-01 00:00:00",
                        "updateUserId": "1",
                        "updateTime": "2020-01-01 00:00:00"
                    },
                    {
                        "functionalRegionId": "13020102",
                        "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                        "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                        "functionalRegionName": "预处理区域",
                        "functionalRegionCode": "02",
                        "functionalRegionLevelCode": "002",
                        "plantType": 1,
                        "functionalRegionUpId": "0",
                        "children": [
                            {
                                "functionalRegionId": "789",
                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                "functionalRegionName": "取水区域-1",
                                "functionalRegionCode": "01",
                                "functionalRegionLevelCode": "001",
                                "plantType": 1,
                                "functionalRegionUpId": "13020101",
                                "children": [
                                    {
                                        "functionalRegionId": "7891",
                                        "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                        "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                        "functionalRegionName": "取水区域-2",
                                        "functionalRegionCode": "01",
                                        "functionalRegionLevelCode": "001001",
                                        "plantType": 1,
                                        "functionalRegionUpId": "1",
                                        "children": [
                                            {
                                                "functionalRegionId": "78911",
                                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                                "functionalRegionName": "取水区域-3",
                                                "functionalRegionCode": "01",
                                                "functionalRegionLevelCode": "001001001",
                                                "plantType": 1,
                                                "functionalRegionUpId": "2",
                                                "children": null,
                                                "delFlg": 0,
                                                "memo": null,
                                                "createUserId": "1",
                                                "createTime": "2020-01-01 00:00:00",
                                                "updateUserId": "0",
                                                "updateTime": "2021-06-11 11:16:43"
                                            },
                                            {
                                                "functionalRegionId": "78912",
                                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                                "functionalRegionName": "取水区域-5",
                                                "functionalRegionCode": "03",
                                                "functionalRegionLevelCode": "001001003",
                                                "plantType": 1,
                                                "functionalRegionUpId": "2",
                                                "children": null,
                                                "delFlg": 0,
                                                "memo": null,
                                                "createUserId": "0",
                                                "createTime": "2021-06-15 11:00:47",
                                                "updateUserId": "0",
                                                "updateTime": "2021-06-15 11:00:47"
                                            }
                                        ],
                                        "delFlg": 0,
                                        "memo": null,
                                        "createUserId": "1",
                                        "createTime": "2020-01-01 00:00:00",
                                        "updateUserId": "1",
                                        "updateTime": "2020-01-01 00:00:00"
                                    }
                                ],
                                "delFlg": 0,
                                "memo": null,
                                "createUserId": "1",
                                "createTime": "2020-01-01 00:00:00",
                                "updateUserId": "1",
                                "updateTime": "2020-01-01 00:00:00"
                            }
                        ],
                        "delFlg": 0,
                        "memo": null,
                        "createUserId": "1",
                        "createTime": "2020-01-01 00:00:00",
                        "updateUserId": "1",
                        "updateTime": "2020-01-01 00:00:00"
                    },
                    {
                        "functionalRegionId": "13020103",
                        "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                        "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                        "functionalRegionName": "混凝沉淀区域",
                        "functionalRegionCode": "03",
                        "functionalRegionLevelCode": "003",
                        "plantType": 1,
                        "functionalRegionUpId": "0",
                        "children": [
                            {
                                "functionalRegionId": "567",
                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                "functionalRegionName": "取水区域-1",
                                "functionalRegionCode": "01",
                                "functionalRegionLevelCode": "001",
                                "plantType": 1,
                                "functionalRegionUpId": "13020101",
                                "children": null,
                                "delFlg": 0,
                                "memo": null,
                                "createUserId": "1",
                                "createTime": "2020-01-01 00:00:00",
                                "updateUserId": "1",
                                "updateTime": "2020-01-01 00:00:00"
                            },
                            {
                                "functionalRegionId": "568",
                                "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                "functionalRegionName": "取水区域-1",
                                "functionalRegionCode": "01",
                                "functionalRegionLevelCode": "001",
                                "plantType": 1,
                                "functionalRegionUpId": "13020101",
                                "children": [
                                    {
                                        "functionalRegionId": "5681",
                                        "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                        "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                        "functionalRegionName": "取水区域-2",
                                        "functionalRegionCode": "01",
                                        "functionalRegionLevelCode": "001001",
                                        "plantType": 1,
                                        "functionalRegionUpId": "1",
                                        "children": null,
                                        "delFlg": 0,
                                        "memo": null,
                                        "createUserId": "1",
                                        "createTime": "2020-01-01 00:00:00",
                                        "updateUserId": "1",
                                        "updateTime": "2020-01-01 00:00:00"
                                    },
                                    {
                                        "functionalRegionId": "5682",
                                        "functionalRegionValidStartTime": "2000-01-01 00:00:00",
                                        "functionalRegionValidEndTime": "2999-12-31 23:59:59",
                                        "functionalRegionName": "取水区域-2",
                                        "functionalRegionCode": "01",
                                        "functionalRegionLevelCode": "001001",
                                        "plantType": 1,
                                        "functionalRegionUpId": "1",
                                        "children": null,
                                        "delFlg": 0,
                                        "memo": null,
                                        "createUserId": "1",
                                        "createTime": "2020-01-01 00:00:00",
                                        "updateUserId": "1",
                                        "updateTime": "2020-01-01 00:00:00"
                                    }
                                ],
                                "delFlg": 0,
                                "memo": null,
                                "createUserId": "1",
                                "createTime": "2020-01-01 00:00:00",
                                "updateUserId": "1",
                                "updateTime": "2020-01-01 00:00:00"
                            }
                        ],
                        "delFlg": 0,
                        "memo": null,
                        "createUserId": "1",
                        "createTime": "2020-01-01 00:00:00",
                        "updateUserId": "1",
                        "updateTime": "2020-01-01 00:00:00"
                    },

                ],
                options: {
                    // https://github.com/simple-uploader/Uploader/tree/develop/samples/Node.js
                    target: '/test/uploadFile',
                    testChunks: false
                    // method: "octet",
                },
                attrs: {
                    accept: 'image/*'
                }
            }

        },
        methods:{
            test() {
                alert(context)
            },

            start(){
                this.idList = [];
                this.regionSuccess = false;
                this.getFatherNodeTest('5682',this.testData);
                console.log(this.idList);
            },

            getFatherNodeTest(curId,data){
                for(let i = 0; i < data.length; i++){
                    this.idList.push(data[i].functionalRegionId);
                    if(data[i].children != null){
                        this.getFatherNodeTest(curId,data[i].children)
                        if(this.regionSuccess){
                            return this.idList;
                        }else {
                            console.log("删除元素："+ this.idList.pop())
                        }
                    }else {
                        if(data[i].functionalRegionId === curId){
                            this.regionSuccess = true;
                            return this.idList
                        }else {
                            console.log("删除元素："+this.idList.pop())
                            if(i===data.length-1){
                                return this.idList;
                            }
                        }
                    }
                }
            }

        },

        mounted(){
            this.start();
        }
    })

</script>

<style>
    .uploader-example {
        width: 880px;
        padding: 15px;
        margin: 40px auto 0;
        font-size: 12px;
        box-shadow: 0 0 10px rgba(0, 0, 0, .4);
    }
    .uploader-example .uploader-btn {
        margin-right: 4px;
    }
    .uploader-example .uploader-list {
        max-height: 440px;
        overflow: auto;
        overflow-x: hidden;
        overflow-y: auto;
    }
</style>
</html>